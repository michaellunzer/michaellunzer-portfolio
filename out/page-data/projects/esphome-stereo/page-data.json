{"componentChunkName":"component---src-templates-project-post-js","path":"/projects/esphome-stereo","result":{"data":{"contentfulProjects":{"id":"a8caf533-26b4-51e1-83fc-1bfa5c557522","title":"ESPHome Stereo","slug":"esphome-stereo","featureImage":{"gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/o4gibwve10tr/zjcl8nTFXnJav50Blg4Er/e09df705edf2202d8d6eb9d22818b8f0/33C0929B-C7FA-4152-BF61-3132BA47138E_1_105_c.jpeg?w=201&h=113&q=50&fm=webp 201w,\nhttps://images.ctfassets.net/o4gibwve10tr/zjcl8nTFXnJav50Blg4Er/e09df705edf2202d8d6eb9d22818b8f0/33C0929B-C7FA-4152-BF61-3132BA47138E_1_105_c.jpeg?w=402&h=226&q=50&fm=webp 402w,\nhttps://images.ctfassets.net/o4gibwve10tr/zjcl8nTFXnJav50Blg4Er/e09df705edf2202d8d6eb9d22818b8f0/33C0929B-C7FA-4152-BF61-3132BA47138E_1_105_c.jpeg?w=803&h=452&q=50&fm=webp 803w","sizes":"(min-width: 803px) 803px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/o4gibwve10tr/zjcl8nTFXnJav50Blg4Er/e09df705edf2202d8d6eb9d22818b8f0/33C0929B-C7FA-4152-BF61-3132BA47138E_1_105_c.jpeg?w=803&h=452&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/o4gibwve10tr/zjcl8nTFXnJav50Blg4Er/e09df705edf2202d8d6eb9d22818b8f0/33C0929B-C7FA-4152-BF61-3132BA47138E_1_105_c.jpeg?w=201&h=113&fl=progressive&q=50&fm=jpg 201w,\nhttps://images.ctfassets.net/o4gibwve10tr/zjcl8nTFXnJav50Blg4Er/e09df705edf2202d8d6eb9d22818b8f0/33C0929B-C7FA-4152-BF61-3132BA47138E_1_105_c.jpeg?w=402&h=226&fl=progressive&q=50&fm=jpg 402w,\nhttps://images.ctfassets.net/o4gibwve10tr/zjcl8nTFXnJav50Blg4Er/e09df705edf2202d8d6eb9d22818b8f0/33C0929B-C7FA-4152-BF61-3132BA47138E_1_105_c.jpeg?w=803&h=452&fl=progressive&q=50&fm=jpg 803w","sizes":"(min-width: 803px) 803px, 100vw"}},"layout":"constrained","backgroundColor":"#a89898","width":803,"height":452}},"description":{"childMarkdownRemark":{"html":"<h2>Finished Product:</h2>\n<p><img src=\"//images.ctfassets.net/o4gibwve10tr/15P2hiQ2pXnQg78cZKihg3/a64bfb9276979298c832492874032f0a/EC114CA5-49E1-4EAF-8628-F203BD1B8599_1_105_c.jpeg\" alt=\"ESPHome Stereo Finished\"></p>\n<h2>Background</h2>\n<p>My Dad is really into stereos and he's an engineer, so naturally he passed his love and appreciation for music and electronics down to me. We've attended <a href=\"http://www.burningamp.org/\">Burning Amp</a> from 2016 - 2019 together and after the event is usually the beginning of a new project. If you've never been before, it's a giant show-and-tell and they have a big parts lottery at the show where people donate extra components from their projects. Often times, you get one piece (like a PCB for an amplifier) that sparks the idea to build a new amplifier.</p>\n<h2>Pass Labs Amp Camp Amp</h2>\n<p>In 2018, we picked up the Pass Labs \"Amp Camp Amp\" PCB. This was designed by Nelson Pass and made for people to assemble during a one-day Amp Camp. Here's a quick picture of the PCB populated with all the components and completing a successful \"spark test\". The first time you add electricity to the project is often called that because you'll <em>quickly</em> find out if you assembled everything correctly. In this situation, the green LED turned on and there weren't any issues.</p>\n<p><img src=\"//images.ctfassets.net/o4gibwve10tr/5brSndJeprLYGE8mS5Irgg/032dbed005592affd8fca918d1b54b13/Screen_Shot_2020-07-23_at_11.24.39_PM.png\" alt=\"ESPHome Stereo Spark Test\"></p>\n<p>Putting the Amp together and soldering the components wasn't extremely difficult -- that's not the main point of this post. If you're looking for a video with all the details, check out this video from Patrick Norton over at TekThing:</p>\n<h2>TekThing Amp Camp Amp Build</h2>\n<iframe width=\"100%\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/RjqJeF34adk?rel=0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n<p>The next step was to assemble the case.</p>\n<h2>So what?</h2>\n<p>The part of the project that I want to highlight and what makes unique is I added an esp8266 microprocessor running ESPHome. With this, I can control a relay (and therefore the stereo) as well as the LEDs with Home-Assistant. I also changed the switch to a relay button with a green LED.</p>\n<p><img src=\"//images.ctfassets.net/o4gibwve10tr/46zaEJcicZLcxx2e7WIOh2/9a642798a78e28a1486b24ef95e59adb/IMG_6909.JPG\" alt=\"ESPHome Stereo Green LED Button\"></p>\n<p>These amplifiers give off a lot of heat, so I can add automations like \"turn off the amplifier when I'm not home\" or \"turn off the LEDs if I'm listening to music in a dark room and later turn off the amplifier after I fall asleep\". An additional feature I added was a temperature sensor, because I was really curious about how hot the stereo gets and thought it'd be interesting to keep track of in a database.</p>\n<p><img src=\"//images.ctfassets.net/o4gibwve10tr/5jrQ5rHyE1IYYrI3bvqkop/84652112acff50b435e4a12303c9caff/Screen_Shot_2020-07-24_at_2.19.27_PM.png\" alt=\"ESPHome Stereo Home Assistant Dashboard\"></p>\n<p>Here's a picture of the insides. Unfortunately, I don't have a schematic available at the moment.</p>\n<p><img src=\"//images.ctfassets.net/o4gibwve10tr/303tFCvCkP1mXXVQlfAonB/f9bbb8d05b75b2d9b31afb9fd8b55e39/FCB165F5-0601-4D3E-90B7-35252D10B0B8_1_105_c.jpg\" alt=\"ESPHome Stereo Top Off\"></p>\n<p><img src=\"//images.ctfassets.net/o4gibwve10tr/OeZPnUwbGs6qWeGgoKhQf/ec54abdfa0929bf1cbd8923391b577d5/2A61AE1C-C993-408C-8BF2-A55970346744_1_105_c.jpeg\" alt=\"ESPHome Stereo PCB 1\"></p>\n<p><img src=\"//images.ctfassets.net/o4gibwve10tr/7sHbl1dVOmbNx9jq2kv5Ab/fcc8ccbf8e479934aec87de628e90afc/DC70411F-FAF1-44E9-88A3-DF69BBE2F3CD_1_105_c.jpeg\" alt=\"ESPHome Stereo PCB 2\"></p>\n<h2>ESPHome YAML Config</h2>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">esphome</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> stereo\n  <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> ESP8266\n  <span class=\"token key atrule\">board</span><span class=\"token punctuation\">:</span> nodemcuv2\n<span class=\"token key atrule\">wifi</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ssid</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Network_SSID\"</span>\n  <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"wifi_password\"</span>\n<span class=\"token comment\"># Enable logging</span>\n<span class=\"token key atrule\">logger</span><span class=\"token punctuation\">:</span>\n<span class=\"token comment\"># Enable Home Assistant API</span>\n<span class=\"token key atrule\">api</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">ota</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">light</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># ... and then make a light out of it.</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> monochromatic\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Stereo Power Button LED\"</span>\n    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> green_led_power\n    <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> light_green_led_power\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> monochromatic\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Stereo Left LED\"</span>\n    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> green_led_left\n    <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> light_green_led_left\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> monochromatic\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Stereo Right LED\"</span>\n    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> green_led_right\n    <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> light_green_led_right\n<span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Register the green LED as a dimmable output ....</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> esp8266_pwm\n    <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> green_led_power\n    <span class=\"token key atrule\">pin</span><span class=\"token punctuation\">:</span> D1\n    <span class=\"token comment\"># inverted: True</span>\n  <span class=\"token comment\"># Register the green LED as a dimmable output ....</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> esp8266_pwm\n    <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> green_led_left\n    <span class=\"token key atrule\">pin</span><span class=\"token punctuation\">:</span> D5\n    <span class=\"token comment\"># inverted: True</span>\n  <span class=\"token comment\"># Register the green LED as a dimmable output ....</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> esp8266_pwm\n    <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> green_led_right\n    <span class=\"token key atrule\">pin</span><span class=\"token punctuation\">:</span> D6\n    <span class=\"token comment\"># inverted: True</span>\n<span class=\"token key atrule\">switch</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> gpio\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Stereo Relay\"</span>\n    <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> relay1\n    <span class=\"token key atrule\">pin</span><span class=\"token punctuation\">:</span> \n      <span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> D3\n      <span class=\"token key atrule\">inverted</span><span class=\"token punctuation\">:</span> yes\n    <span class=\"token key atrule\">on_turn_on</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">then</span><span class=\"token punctuation\">:</span> \n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">light.turn_on</span><span class=\"token punctuation\">:</span> light_green_led_power\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">light.turn_on</span><span class=\"token punctuation\">:</span> light_green_led_left\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">light.turn_on</span><span class=\"token punctuation\">:</span> light_green_led_right\n        <span class=\"token comment\"># - binary_sensor.turn_on: id_relay1_binary</span>\n    <span class=\"token key atrule\">on_turn_off</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">then</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">light.turn_off</span><span class=\"token punctuation\">:</span> light_green_led_power\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">light.turn_off</span><span class=\"token punctuation\">:</span> light_green_led_left\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">light.turn_off</span><span class=\"token punctuation\">:</span> light_green_led_right\n        <span class=\"token comment\"># - binary_sensor.turn_off: id_relay1_binary</span>\n<span class=\"token comment\"># This is the front button on the stereo amplifier. pressing it should turn the relay on/off</span>\n<span class=\"token key atrule\">binary_sensor</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> gpio\n    <span class=\"token key atrule\">pin</span><span class=\"token punctuation\">:</span> \n      <span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> D2\n      <span class=\"token key atrule\">mode</span><span class=\"token punctuation\">:</span> INPUT_PULLUP\n    <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">delayed_on</span><span class=\"token punctuation\">:</span> 100ms\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">delayed_off</span><span class=\"token punctuation\">:</span> 100ms\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Stereo Power Button\"</span>\n    <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> id_relay1_binary\n    <span class=\"token key atrule\">on_press</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">then</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">switch.toggle</span><span class=\"token punctuation\">:</span> relay1\n<span class=\"token key atrule\">sensor</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> dht\n    <span class=\"token key atrule\">pin</span><span class=\"token punctuation\">:</span> D0\n    <span class=\"token key atrule\">temperature</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Stereo Amp Temperature\"</span>\n    <span class=\"token key atrule\">humidity</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Stereo Amp Humidity\"</span>\n    <span class=\"token key atrule\">model</span><span class=\"token punctuation\">:</span> AM2302</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Bonus Burning Amp Video</h2>\n<iframe width=\"100%\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/VEinkCKq7Xw?rel=0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>"}},"createdAt":"2020-07-31T20:16:39.085Z","publishedDate":"2019-07-20"},"contentfulSiteInformation":{"siteUrl":"https://michaellunzer.com","twiteerHandle":"@michaellunzer"}},"pageContext":{"slug":"esphome-stereo"}},"staticQueryHashes":["1194089924","1242132861","1746898652","1794736483","425184262","603260039","868401008"]}