<!DOCTYPE html><!--tiUpHt7fG_8CjpfaGfSTE--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="https://images.ctfassets.net/o4gibwve10tr/7yHuAa09NVOcZ25POk7cbM/9b2cb1a82fcec0461a26b030df8ed159/ML-logo-white.png"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/5vMqmyuNhvIWo9EVLcHc6T/89c752338f4640dbdba1307449d94a67/ht801.jpeg"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/4CU6J6FmWG9p1htwpLGfnd/555cdcb916537e24e7d5a20b42f1420c/Screen_Shot_2021-03-06_at_9.36.52_PM.png"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/1PRNejlAqqLlX72Rw3h1Pm/90a77a6889ef174c0dd1148ba8548923/Twilio_SIP_Support_Screen_Shot.png"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/3PhjpqA93wUNsZuwtAYRq7/2e955afcc78a2f6b8936d2936f79d5ef/twilio_wake_up_call_-_SIP_domain_configuration.png"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/6UFXmIFSYs9UWA5NHyxBXH/3c430249d1de1494a0cecf8950381116/Twilio_Wake_Up_Call_-_Create_a_Credential.png"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/2lskbw5hNGL8krdI7eycXh/cdca8645356f3265124beac269f06ed2/Twilio_Wake_Up_Call_-_Outgoing_Call_Configuration.png"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/4rMReu6moj5v0qwb3zgy5B/e6216b1238527be6ea04706f2ae011c7/Twilio_Wake_Up_Call_-_SIP_Registration.png"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/53eDJwKJymDedxUyHBJq8R/5103801c7ec19c344e1718770a41daa6/Grandstream_Device_Configuration_Updated.png"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/6GJlfNCyE6VFwjFgMvF0vN/397a23d05568bc620bbd799fb8b59ea7/Screen_Shot_2021-03-30_at_8.48.33_PM.png"/><link rel="stylesheet" href="/_next/static/css/931b179cff3131dc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/f56e075401be6041.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/bf413bc97a2d8c3a.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/b9c247a1f9d5af8a.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/f055e431c58b907b.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-59b2e0708c30977e.js"/><script src="/_next/static/chunks/4bd1b696-cf72ae8a39fa05aa.js" async=""></script><script src="/_next/static/chunks/964-9b249bc0ac5a9a8b.js" async=""></script><script src="/_next/static/chunks/main-app-f320de467931c2a1.js" async=""></script><script src="/_next/static/chunks/778-f9403c0e33e1c074.js" async=""></script><script src="/_next/static/chunks/63-b8ba2254fb9ac97a.js" async=""></script><script src="/_next/static/chunks/231-25f0858d523e67a4.js" async=""></script><script src="/_next/static/chunks/app/blogs/%5Bslug%5D/page-dc1945ed8fd780cb.js" async=""></script><script src="/_next/static/chunks/app/blogs/page-72d57091bb988b6e.js" async=""></script><meta name="next-size-adjust" content=""/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><title>Michael Lunzer</title><meta name="description" content="Personal Site"/><meta name="author" content="@michaellunzer"/><meta name="robots" content="index, follow"/><meta property="og:title" content="Michael Lunzer"/><meta property="og:description" content="Personal Site"/><meta property="og:url" content="https://www.michaellunzer.com/"/><meta property="og:site_name" content="Michael Lunzer"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Michael Lunzer"/><meta name="twitter:description" content="Personal Site"/><link rel="stylesheet" href="/style.css"/><link rel="stylesheet" href="/font-awesome.css"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_e8ce0c"><div hidden=""><!--$--><!--/$--></div><header class="site-header "><div class="container"><div class="header-main"><div class="logo"><a href="/"><img src="https://images.ctfassets.net/o4gibwve10tr/7yHuAa09NVOcZ25POk7cbM/9b2cb1a82fcec0461a26b030df8ed159/ML-logo-white.png" alt="logo"/></a></div><div class="responsive-menu"><span></span></div><div class="menu"><ul><li><a href="/#home">Home</a></li><li><a href="/#About">About</a></li><li><a href="/#Blogs">Blog</a></li><li><a href="/#Projects">Projects</a></li><li><a href="/#BucketList">Bucket List</a></li><li><a href="/#Contact">Contact</a></li><li><a href="/resume/">Resume</a></li><li><a href="/spotify/">Spotify</a></li></ul></div></div></div></header><div><main id="home"><div class="site-container blog-post"><div class="container"><div class="feature-img"><img alt="Connecting a Grandstream HT80X (HT801 or HT802) to Twilio SIP" loading="lazy" width="1500" height="800" decoding="async" data-nimg="1" class="img-fluid" style="color:transparent;object-fit:cover;object-position:50% 50%" src="https://images.ctfassets.net/o4gibwve10tr/5e54w5WprkodnaJyjk15dc/f4ca8c28e9c51332108e3b780c6f23d3/template.jpg"/></div><div class="details"><h1 class="title">Connecting a Grandstream HT80X (HT801 or HT802) to Twilio SIP</h1><span class="date"><i class="fas fa-calendar-alt"></i> <!-- -->August 2, 2025</span><div class="markdown-content"><h1 class="markdown-h1">The Inspiration</h1>
<p>I&#x27;m diving into all of Twilio&#x27;s products and trying to learn as much as I can about them. The best way I learn is by actually doing it and trying to build it myself. My focus on this project was learning about <a href="https://en.wikipedia.org/wiki/SIP_trunking" target="_blank" rel="noopener noreferrer" class="markdown-link">SIP Trunking</a>. It seemed pretty straightforward, but as always the devil is in the details and there are always nuances to learn about everything.</p>
<h1 class="markdown-h1">Future Goal</h1>
<p>I wanted to get an Analog Telephone Adapter, so I can hook up up an old landline telephone with an obnoxious bell and have it wake me up like an alarm clock ⏰.</p>
<h1 class="markdown-h1">Picking The Hardware</h1>
<p>There&#x27;s a bunch of Analog Telephone Adatpers (ATA) out there. I was also looking at the Cisco ATA 191 but ultimately settled on the Grandstream HT801 because it was less than $20 from someone on eBay and I found these <a href="https://nickbusey.com/article/2020-05-04-twilio-grandstream/" target="_blank" rel="noopener noreferrer" class="markdown-link">instructions from Nick Busey</a> on how to set up the device specifically with Twilio SIP. I thought that because it was a recent post, that I wouldn&#x27;t have much difficulty trying to configure it. Here&#x27;s the <a href="https://amzn.to/3eh0pvG" target="_blank" rel="noopener noreferrer" class="markdown-link">Amazon link</a>.</p>
<h1 class="markdown-h1">Getting Started</h1>
<p>I had orginally followed Nick&#x27;s instructions but there were some drawbacks. I had trouble with inbound calls and also triggering calls with the REST API.</p>
<p><img src="//images.ctfassets.net/o4gibwve10tr/5vMqmyuNhvIWo9EVLcHc6T/89c752338f4640dbdba1307449d94a67/ht801.jpeg" alt="Twilio SIP ht801"/></p>
<h1 class="markdown-h1">Steps</h1>
<ol class="markdown-ol">
<li><a href="https://www.twilio.com/docs/sip-trunking/ip-addresses" target="_blank" rel="noopener noreferrer" class="markdown-link">Open ports in your router&#x27;s firewall</a></li>
<li>Configure Outbound Calls</li>
<li>Configure Inbound Calls</li>
<li>Configure the Grandstream device</li>
</ol>
<p>Unfortunately, in Nick&#x27;s use-case, he only needed outbound calling, which made the phone only half as useful for me haha. I recognized his name as the creator/maintainer of the <a href="https://homelabos.com/" target="_blank" rel="noopener noreferrer" class="markdown-link">HomeLabOS project</a>. So I knew I could find him on the <a href="https://homelabos.zulipchat.com/login/" target="_blank" rel="noopener noreferrer" class="markdown-link">HomeLabOS Zulip Chat</a> and asked him a few questions on if he was able to get outbound AND inbound calling working. He graciously answered a few of my questions. Unfortunately, he doesn&#x27;t use the device anymore and didn&#x27;t look into getting inbound calls more.</p>
<p>So, at this point I was able to configure the device and have outbound calling going, but I needed more. So, I logged a Service Ticket with Twilio. Again, this was a good excuse to learn more about Twilio by using the products like Customer Support.</p>
<p>A customer service rep was able to help me troubleshoot the issue and taught me a few things along the way, like this... ~~</p>
<h2 class="markdown-h2"><strong>Pro Tip</strong>:</h2>
<p>You can download the PCAP file and explore it with WireShark to explore the headers and see what&#x27;s going on during the connection process.</p>
<p><img src="//images.ctfassets.net/o4gibwve10tr/4CU6J6FmWG9p1htwpLGfnd/555cdcb916537e24e7d5a20b42f1420c/Screen_Shot_2021-03-06_at_9.36.52_PM.png" alt="Twilio SIP Console PCAP Download"/></p>
<p>During the connection process for incoming calls, he explained that the Contact section in the Header was trying to return the local IP address of the ATA box instead of my public IP address of my home internet connection -- so something was literally getting lost in translation, well the <em>Network Address Translation</em> (NAT).</p>
<p><img src="//images.ctfassets.net/o4gibwve10tr/1PRNejlAqqLlX72Rw3h1Pm/90a77a6889ef174c0dd1148ba8548923/Twilio_SIP_Support_Screen_Shot.png" alt="Twilio SIP Support Screen Shot"/></p>
<p>At first, I ended up hard-coding my public IP address in this section of the Grandstream configuration like this:</p>
<p><code class="inline-code">Use NAT IP: 123.456.78.90</code></p>
<br/>
<p>However, there were some issues if you put in your Public IP address -- better hope it doesn&#x27;t change! This &quot;hack&quot; overrides the internal IP address that was being returned in the Header and allows incoming calls to come in. I tried to use a Dynamic DNS address but the field only allowed enough digits for an IP address.</p>
<p>With the first configuration, I was having trouble receiving calls via a REST API command. Investigating into the PCAP file helped me troubleshoot. After taking a step back, I ended up figuring the right configuration!</p>
<h1 class="markdown-h1">Create a SIP Trunk</h1>
<p>Name it something and add an <code class="inline-code">Origination URL</code>: <code class="inline-code">sip:username@your_domain.sip.us1.twilio.com</code></p>
<h1 class="markdown-h1">Configure a SIP Domain in Twilio Programmable Voice</h1>
<p>make the <code class="inline-code">SIP URI</code> something easy for you to remember. This will be the url of the <code class="inline-code">Primary SIP Server</code> on your Grandstream box. With that, you&#x27;ll have to add a value to the <code class="inline-code">IP Access Control List</code> and a <code class="inline-code">Credential List</code>. The username/password you put in your <code class="inline-code">Credential List</code> will be the <code class="inline-code">SIP User ID</code> and the <code class="inline-code">Authenticate ID</code> on your Grandstream box.</p>
<p><img src="//images.ctfassets.net/o4gibwve10tr/3PhjpqA93wUNsZuwtAYRq7/2e955afcc78a2f6b8936d2936f79d5ef/twilio_wake_up_call_-_SIP_domain_configuration.png" alt="twilio wake up call - SIP domain configuration"/></p>
<h1 class="markdown-h1">Create a Credential</h1>
<p><img src="//images.ctfassets.net/o4gibwve10tr/6UFXmIFSYs9UWA5NHyxBXH/3c430249d1de1494a0cecf8950381116/Twilio_Wake_Up_Call_-_Create_a_Credential.png" alt="Twilio Wake Up Call - Create a Credential"/></p>
<h1 class="markdown-h1">Configure Outgoing Calls with a TwiML Bin</h1>
<p>While you&#x27;re here, scroll down and add a TwiML Bin for when <code class="inline-code">A Call Comes In</code> so you can make outgoing calls.</p>
<pre><pre class="code-block"><code class="hljs language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Response</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Dial</span> <span class="hljs-attr">callerId</span>=<span class="hljs-string">&quot;+14151234567&quot;</span>&gt;</span>{{#e164}}{{To}}{{/e164}}<span class="hljs-tag">&lt;/<span class="hljs-name">Dial</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Response</span>&gt;</span>
</code></pre></pre>
<p><img src="//images.ctfassets.net/o4gibwve10tr/2lskbw5hNGL8krdI7eycXh/cdca8645356f3265124beac269f06ed2/Twilio_Wake_Up_Call_-_Outgoing_Call_Configuration.png" alt="Twilio Wake Up Call - Outgoing Call Configuration"/></p>
<h1 class="markdown-h1">SIP Registration</h1>
<p><img src="//images.ctfassets.net/o4gibwve10tr/4rMReu6moj5v0qwb3zgy5B/e6216b1238527be6ea04706f2ae011c7/Twilio_Wake_Up_Call_-_SIP_Registration.png" alt="Twilio Wake Up Call - SIP Registration"/></p>
<h1 class="markdown-h1">Screenshot of Grandstream Configuration</h1>
<p>When I was looking for help on the configuration, I kept seeing sections but wanted the FULL image. So, here&#x27;s mine, in its entirety.</p>
<p>Update the following fields:</p>
<ul class="markdown-ul">
<li>Primary SIP Server: your_domain.sip.us1.twilio.com</li>
<li>SIP User ID</li>
<li>Authenticate ID</li>
<li>Authenticate Password</li>
<li>SIP REGISTER Contact Uses: WAN Address</li>
<li>Check SIP User ID for incoming INVITE</li>
<li>Dial Plan Prefix: +</li>
</ul>
<p><img src="//images.ctfassets.net/o4gibwve10tr/53eDJwKJymDedxUyHBJq8R/5103801c7ec19c344e1718770a41daa6/Grandstream_Device_Configuration_Updated.png" alt="Grandstream Device Configuration Updated"/></p>
<h1 class="markdown-h1">Confirm SIP Registration</h1>
<p>You&#x27;ll see your username and &quot;Registered&quot; on the Port Status line.</p>
<p><img src="//images.ctfassets.net/o4gibwve10tr/6GJlfNCyE6VFwjFgMvF0vN/397a23d05568bc620bbd799fb8b59ea7/Screen_Shot_2021-03-30_at_8.48.33_PM.png" alt="Twilio Wake Up Call - Confirm Registration"/></p>
<h1 class="markdown-h1">Configure Incoming Calls With a TwiML Bin</h1>
<p>As outlined <a href="https://www.twilio.com/docs/voice/api/sip-registration#receiving-calls-on-your-registered-sip-endpoint" target="_blank" rel="noopener noreferrer" class="markdown-link">here</a></p>
<pre><pre class="code-block"><code class="hljs language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Response</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Dial</span> <span class="hljs-attr">answerOnBridge</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Sip</span>&gt;</span>username@your_domain.sip.twilio.com<span class="hljs-tag">&lt;/<span class="hljs-name">Sip</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Dial</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Response</span>&gt;</span>
</code></pre></pre>
<p>Go to your phone number in the Numbers Tab and click on it.
<code class="inline-code">When a Comes In</code>: run the TwiML Bin you just created above.</p>
<h1 class="markdown-h1">Next Steps</h1>
<p>It&#x27;d be fun to setup a PBX server and have IP Phones with different extensions for each room in my house, but it&#x27;s probably extreme overkill for what I need. Here&#x27;s how I incorporate the ATA landline into a new type of <a href="https://michaellunzer.com/projects/home-assistant-wake-up-alarm-with-a-phone-call" target="_blank" rel="noopener noreferrer" class="markdown-link">Wake Up Call Alarm project</a>.</p></div></div><div class="post-social"><h6 class="title is-6">Share:</h6><button class="button is-outlined is-rounded facebook"><span class="icon"><i class="fab fa-facebook-f"></i></span><span class="text">Facebook</span></button><button class="button is-outlined is-rounded twitter"><span class="icon"><i class="fab fa-twitter"></i></span><span class="text">Twitter</span></button></div><div class="comments-section"><h3>Comments</h3><p>Comments are currently disabled. Feel free to reach out on social media!</p></div></div></div></main></div><div class="site-footer" id="footer"><div class="container"><span>Copyright © <!-- -->Michael Lunzer<!-- --> <!-- -->2025</span></div></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-59b2e0708c30977e.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7555,[],\"\"]\n3:I[1295,[],\"\"]\n6:I[9665,[],\"OutletBoundary\"]\n8:I[4911,[],\"AsyncMetadataOutlet\"]\na:I[9665,[],\"ViewportBoundary\"]\nc:I[9665,[],\"MetadataBoundary\"]\nd:\"$Sreact.suspense\"\nf:I[8393,[],\"\"]\n:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/931b179cff3131dc.css\",\"style\"]\n:HL[\"/_next/static/css/f56e075401be6041.css\",\"style\"]\n:HL[\"/_next/static/css/bf413bc97a2d8c3a.css\",\"style\"]\n:HL[\"/_next/static/css/b9c247a1f9d5af8a.css\",\"style\"]\n:HL[\"/_next/static/css/f055e431c58b907b.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"tiUpHt7fG-8CjpfaGfSTE\",\"p\":\"\",\"c\":[\"\",\"blogs\",\"connecting-a-grandstream-ht80x-ht801-or-ht802-to-twilio-sip\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blogs\",{\"children\":[[\"slug\",\"connecting-a-grandstream-ht80x-ht801-or-ht802-to-twilio-sip\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/931b179cff3131dc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f56e075401be6041.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/x-icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"180x180\",\"href\":\"/apple-touch-icon-180x180.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"152x152\",\"href\":\"/apple-touch-icon-152x152.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"144x144\",\"href\":\"/apple-touch-icon-144x144.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"120x120\",\"href\":\"/apple-touch-icon-120x120.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"114x114\",\"href\":\"/apple-touch-icon-114x114.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"76x76\",\"href\":\"/apple-touch-icon-76x76.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"72x72\",\"href\":\"/apple-touch-icon-72x72.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"57x57\",\"href\":\"/apple-touch-icon-57x57.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"/style.css\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"/font-awesome.css\"}]]}],[\"$\",\"body\",null,{\"className\":\"__className_e8ce0c\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$L4\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/bf413bc97a2d8c3a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b9c247a1f9d5af8a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[\"blogs\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"connecting-a-grandstream-ht80x-ht801-or-ht802-to-twilio-sip\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/bf413bc97a2d8c3a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b9c247a1f9d5af8a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f055e431c58b907b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L6\",null,{\"children\":[\"$L7\",[\"$\",\"$L8\",null,{\"promise\":\"$@9\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$d\",null,{\"fallback\":null,\"children\":\"$Le\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$f\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n7:null\n"])</script><script>self.__next_f.push([1,"9:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Michael Lunzer\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Personal Site\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"@michaellunzer\"}],[\"$\",\"meta\",\"3\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"Michael Lunzer\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"Personal Site\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:url\",\"content\":\"https://www.michaellunzer.com/\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:site_name\",\"content\":\"Michael Lunzer\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:title\",\"content\":\"Michael Lunzer\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:description\",\"content\":\"Personal Site\"}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"e:\"$9:metadata\"\n"])</script><script>self.__next_f.push([1,"10:I[658,[\"778\",\"static/chunks/778-f9403c0e33e1c074.js\",\"63\",\"static/chunks/63-b8ba2254fb9ac97a.js\",\"231\",\"static/chunks/231-25f0858d523e67a4.js\",\"744\",\"static/chunks/app/blogs/%5Bslug%5D/page-dc1945ed8fd780cb.js\"],\"default\"]\n11:I[6874,[\"778\",\"static/chunks/778-f9403c0e33e1c074.js\",\"63\",\"static/chunks/63-b8ba2254fb9ac97a.js\",\"156\",\"static/chunks/app/blogs/page-72d57091bb988b6e.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"$L10\",null,{\"siteInfo\":{\"metadata\":{\"tags\":[],\"concepts\":[]},\"sys\":{\"space\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"Space\",\"id\":\"o4gibwve10tr\"}},\"id\":\"1vaZauN3G1LbRsJutH3AU9\",\"type\":\"Entry\",\"createdAt\":\"2020-05-28T21:29:56.813Z\",\"updatedAt\":\"2022-04-19T07:19:17.934Z\",\"environment\":{\"sys\":{\"id\":\"master\",\"type\":\"Link\",\"linkType\":\"Environment\"}},\"publishedVersion\":45,\"revision\":18,\"contentType\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"ContentType\",\"id\":\"siteInformation\"}},\"locale\":\"en-US\"},\"fields\":{\"siteName\":\"Michael Lunzer\",\"siteUrl\":\"https://michaellunzer.com\",\"logo\":{\"metadata\":{\"tags\":[],\"concepts\":[]},\"sys\":{\"space\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"Space\",\"id\":\"o4gibwve10tr\"}},\"id\":\"7yHuAa09NVOcZ25POk7cbM\",\"type\":\"Asset\",\"createdAt\":\"2020-05-28T21:29:46.445Z\",\"updatedAt\":\"2020-07-03T23:34:40.696Z\",\"environment\":{\"sys\":{\"id\":\"master\",\"type\":\"Link\",\"linkType\":\"Environment\"}},\"publishedVersion\":35,\"revision\":10,\"locale\":\"en-US\"},\"fields\":{\"title\":\"ML-logo-white\",\"file\":{\"url\":\"//images.ctfassets.net/o4gibwve10tr/7yHuAa09NVOcZ25POk7cbM/9b2cb1a82fcec0461a26b030df8ed159/ML-logo-white.png\",\"details\":{\"size\":31304,\"image\":{\"width\":319,\"height\":302}},\"fileName\":\"ML-logo-white.png\",\"contentType\":\"image/png\"}}},\"twiteerHandle\":\"@michaellunzer\",\"siteDescription\":\"Personal Site\",\"menus\":[\"Blogs\",\"Photos\",\"About\",\"Contact\",\"Work\",\"Map\",\"Resume\",\"Projects\",\"Bucket List\",\"Spotify\"]}},\"children\":[null,[\"$\",\"div\",null,{\"className\":\"site-container\",\"children\":[\"$\",\"div\",null,{\"className\":\"container\",\"children\":[\"$\",\"div\",null,{\"className\":\"row\",\"children\":[\"$\",\"div\",null,{\"className\":\"col-sm-12 text-center\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"404 - Page Not Found\"}],[\"$\",\"p\",null,{\"children\":\"The page you're looking for doesn't exist.\"}],[\"$\",\"$L11\",null,{\"href\":\"/\",\"className\":\"btn btn-primary\",\"children\":\"Go back home\"}]]}]}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"12:I[3063,[\"778\",\"static/chunks/778-f9403c0e33e1c074.js\",\"63\",\"static/chunks/63-b8ba2254fb9ac97a.js\",\"231\",\"static/chunks/231-25f0858d523e67a4.js\",\"744\",\"static/chunks/app/blogs/%5Bslug%5D/page-dc1945ed8fd780cb.js\"],\"Image\"]\n13:I[2370,[\"778\",\"static/chunks/778-f9403c0e33e1c074.js\",\"63\",\"static/chunks/63-b8ba2254fb9ac97a.js\",\"231\",\"static/chunks/231-25f0858d523e67a4.js\",\"744\",\"static/chunks/app/blogs/%5Bslug%5D/page-dc1945ed8fd780cb.js\"],\"default\"]\n14:T1cef,"])</script><script>self.__next_f.push([1,"# The Inspiration\n\nI'm diving into all of Twilio's products and trying to learn as much as I can about them. The best way I learn is by actually doing it and trying to build it myself. My focus on this project was learning about [SIP Trunking](https://en.wikipedia.org/wiki/SIP_trunking). It seemed pretty straightforward, but as always the devil is in the details and there are always nuances to learn about everything. \n\n# Future Goal\nI wanted to get an Analog Telephone Adapter, so I can hook up up an old landline telephone with an obnoxious bell and have it wake me up like an alarm clock ⏰. \n\n# Picking The Hardware\nThere's a bunch of Analog Telephone Adatpers (ATA) out there. I was also looking at the Cisco ATA 191 but ultimately settled on the Grandstream HT801 because it was less than $20 from someone on eBay and I found these [instructions from Nick Busey](https://nickbusey.com/article/2020-05-04-twilio-grandstream/) on how to set up the device specifically with Twilio SIP. I thought that because it was a recent post, that I wouldn't have much difficulty trying to configure it. Here's the [Amazon link](https://amzn.to/3eh0pvG).\n\n# Getting Started\n\nI had orginally followed Nick's instructions but there were some drawbacks. I had trouble with inbound calls and also triggering calls with the REST API.\n\n![Twilio SIP ht801](//images.ctfassets.net/o4gibwve10tr/5vMqmyuNhvIWo9EVLcHc6T/89c752338f4640dbdba1307449d94a67/ht801.jpeg)\n\n# Steps\n1. [Open ports in your router's firewall](https://www.twilio.com/docs/sip-trunking/ip-addresses)\n2. Configure Outbound Calls\n3. Configure Inbound Calls\n4. Configure the Grandstream device\n\nUnfortunately, in Nick's use-case, he only needed outbound calling, which made the phone only half as useful for me haha. I recognized his name as the creator/maintainer of the [HomeLabOS project](https://homelabos.com/). So I knew I could find him on the [HomeLabOS Zulip Chat](https://homelabos.zulipchat.com/login/) and asked him a few questions on if he was able to get outbound AND inbound calling working. He graciously answered a few of my questions. Unfortunately, he doesn't use the device anymore and didn't look into getting inbound calls more. \n\nSo, at this point I was able to configure the device and have outbound calling going, but I needed more. So, I logged a Service Ticket with Twilio. Again, this was a good excuse to learn more about Twilio by using the products like Customer Support. \n\nA customer service rep was able to help me troubleshoot the issue and taught me a few things along the way, like this... ~~\n\n## __Pro Tip__: \nYou can download the PCAP file and explore it with WireShark to explore the headers and see what's going on during the connection process. \n\n![Twilio SIP Console PCAP Download](//images.ctfassets.net/o4gibwve10tr/4CU6J6FmWG9p1htwpLGfnd/555cdcb916537e24e7d5a20b42f1420c/Screen_Shot_2021-03-06_at_9.36.52_PM.png)\n\nDuring the connection process for incoming calls, he explained that the Contact section in the Header was trying to return the local IP address of the ATA box instead of my public IP address of my home internet connection -- so something was literally getting lost in translation, well the *Network Address Translation* (NAT). \n\n![Twilio SIP Support Screen Shot](//images.ctfassets.net/o4gibwve10tr/1PRNejlAqqLlX72Rw3h1Pm/90a77a6889ef174c0dd1148ba8548923/Twilio_SIP_Support_Screen_Shot.png)\n\nAt first, I ended up hard-coding my public IP address in this section of the Grandstream configuration like this:\n\n`Use NAT IP: 123.456.78.90`\n\n\u003cbr /\u003e\n\nHowever, there were some issues if you put in your Public IP address -- better hope it doesn't change! This \"hack\" overrides the internal IP address that was being returned in the Header and allows incoming calls to come in. I tried to use a Dynamic DNS address but the field only allowed enough digits for an IP address. \n\nWith the first configuration, I was having trouble receiving calls via a REST API command. Investigating into the PCAP file helped me troubleshoot. After taking a step back, I ended up figuring the right configuration!\n\n# Create a SIP Trunk\n\nName it something and add an `Origination URL`: `sip:username@your_domain.sip.us1.twilio.com`\n\n# Configure a SIP Domain in Twilio Programmable Voice\n\nmake the `SIP URI` something easy for you to remember. This will be the url of the `Primary SIP Server` on your Grandstream box. With that, you'll have to add a value to the `IP Access Control List` and a `Credential List`. The username/password you put in your `Credential List` will be the `SIP User ID` and the `Authenticate ID` on your Grandstream box.\n\n![twilio wake up call - SIP domain configuration](//images.ctfassets.net/o4gibwve10tr/3PhjpqA93wUNsZuwtAYRq7/2e955afcc78a2f6b8936d2936f79d5ef/twilio_wake_up_call_-_SIP_domain_configuration.png)\n\n# Create a Credential\n\n![Twilio Wake Up Call - Create a Credential](//images.ctfassets.net/o4gibwve10tr/6UFXmIFSYs9UWA5NHyxBXH/3c430249d1de1494a0cecf8950381116/Twilio_Wake_Up_Call_-_Create_a_Credential.png)\n\n# Configure Outgoing Calls with a TwiML Bin\nWhile you're here, scroll down and add a TwiML Bin for when `A Call Comes In` so you can make outgoing calls.\n\n```xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cResponse\u003e\n  \u003cDial callerId=\"+14151234567\"\u003e{{#e164}}{{To}}{{/e164}}\u003c/Dial\u003e\n\u003c/Response\u003e\n```\n\n![Twilio Wake Up Call - Outgoing Call Configuration](//images.ctfassets.net/o4gibwve10tr/2lskbw5hNGL8krdI7eycXh/cdca8645356f3265124beac269f06ed2/Twilio_Wake_Up_Call_-_Outgoing_Call_Configuration.png)\n\n# SIP Registration\n\n![Twilio Wake Up Call - SIP Registration](//images.ctfassets.net/o4gibwve10tr/4rMReu6moj5v0qwb3zgy5B/e6216b1238527be6ea04706f2ae011c7/Twilio_Wake_Up_Call_-_SIP_Registration.png)\n\n# Screenshot of Grandstream Configuration\n\nWhen I was looking for help on the configuration, I kept seeing sections but wanted the FULL image. So, here's mine, in its entirety. \n\nUpdate the following fields:\n- Primary SIP Server: your_domain.sip.us1.twilio.com\n- SIP User ID\n- Authenticate ID\n- Authenticate Password\n- SIP REGISTER Contact Uses: WAN Address\n- Check SIP User ID for incoming INVITE\n- Dial Plan Prefix: +\n\n![Grandstream Device Configuration Updated](//images.ctfassets.net/o4gibwve10tr/53eDJwKJymDedxUyHBJq8R/5103801c7ec19c344e1718770a41daa6/Grandstream_Device_Configuration_Updated.png)\n\n# Confirm SIP Registration\n\nYou'll see your username and \"Registered\" on the Port Status line.\n\n![Twilio Wake Up Call - Confirm Registration](//images.ctfassets.net/o4gibwve10tr/6GJlfNCyE6VFwjFgMvF0vN/397a23d05568bc620bbd799fb8b59ea7/Screen_Shot_2021-03-30_at_8.48.33_PM.png)\n\n# Configure Incoming Calls With a TwiML Bin\n\nAs outlined [here](https://www.twilio.com/docs/voice/api/sip-registration#receiving-calls-on-your-registered-sip-endpoint)\n\n```xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cResponse\u003e\n  \u003cDial answerOnBridge=\"true\"\u003e\n    \u003cSip\u003eusername@your_domain.sip.twilio.com\u003c/Sip\u003e\n  \u003c/Dial\u003e\n\u003c/Response\u003e\n```\n\nGo to your phone number in the Numbers Tab and click on it.\n`When a Comes In`: run the TwiML Bin you just created above.\n\n# Next Steps\nIt'd be fun to setup a PBX server and have IP Phones with different extensions for each room in my house, but it's probably extreme overkill for what I need. Here's how I incorporate the ATA landline into a new type of [Wake Up Call Alarm project](https://michaellunzer.com/projects/home-assistant-wake-up-alarm-with-a-phone-call)."])</script><script>self.__next_f.push([1,"5:[\"$\",\"$L10\",null,{\"siteInfo\":{\"metadata\":{\"tags\":[],\"concepts\":[]},\"sys\":{\"space\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"Space\",\"id\":\"o4gibwve10tr\"}},\"id\":\"1vaZauN3G1LbRsJutH3AU9\",\"type\":\"Entry\",\"createdAt\":\"2020-05-28T21:29:56.813Z\",\"updatedAt\":\"2022-04-19T07:19:17.934Z\",\"environment\":{\"sys\":{\"id\":\"master\",\"type\":\"Link\",\"linkType\":\"Environment\"}},\"publishedVersion\":45,\"revision\":18,\"contentType\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"ContentType\",\"id\":\"siteInformation\"}},\"locale\":\"en-US\"},\"fields\":{\"siteName\":\"Michael Lunzer\",\"siteUrl\":\"https://michaellunzer.com\",\"logo\":{\"metadata\":{\"tags\":[],\"concepts\":[]},\"sys\":{\"space\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"Space\",\"id\":\"o4gibwve10tr\"}},\"id\":\"7yHuAa09NVOcZ25POk7cbM\",\"type\":\"Asset\",\"createdAt\":\"2020-05-28T21:29:46.445Z\",\"updatedAt\":\"2020-07-03T23:34:40.696Z\",\"environment\":{\"sys\":{\"id\":\"master\",\"type\":\"Link\",\"linkType\":\"Environment\"}},\"publishedVersion\":35,\"revision\":10,\"locale\":\"en-US\"},\"fields\":{\"title\":\"ML-logo-white\",\"file\":{\"url\":\"//images.ctfassets.net/o4gibwve10tr/7yHuAa09NVOcZ25POk7cbM/9b2cb1a82fcec0461a26b030df8ed159/ML-logo-white.png\",\"details\":{\"size\":31304,\"image\":{\"width\":319,\"height\":302}},\"fileName\":\"ML-logo-white.png\",\"contentType\":\"image/png\"}}},\"twiteerHandle\":\"@michaellunzer\",\"siteDescription\":\"Personal Site\",\"menus\":[\"Blogs\",\"Photos\",\"About\",\"Contact\",\"Work\",\"Map\",\"Resume\",\"Projects\",\"Bucket List\",\"Spotify\"]}},\"children\":[null,[\"$\",\"div\",null,{\"className\":\"site-container blog-post\",\"children\":[\"$\",\"div\",null,{\"className\":\"container\",\"children\":[[\"$\",\"div\",null,{\"className\":\"feature-img\",\"children\":[\"$\",\"$L12\",null,{\"src\":\"https://images.ctfassets.net/o4gibwve10tr/5e54w5WprkodnaJyjk15dc/f4ca8c28e9c51332108e3b780c6f23d3/template.jpg\",\"alt\":\"Connecting a Grandstream HT80X (HT801 or HT802) to Twilio SIP\",\"width\":1500,\"height\":800,\"className\":\"img-fluid\",\"style\":{\"objectFit\":\"cover\",\"objectPosition\":\"50% 50%\"}}]}],[\"$\",\"div\",null,{\"className\":\"details\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"title\",\"children\":\"Connecting a Grandstream HT80X (HT801 or HT802) to Twilio SIP\"}],[\"$\",\"span\",null,{\"className\":\"date\",\"children\":[[\"$\",\"i\",null,{\"className\":\"fas fa-calendar-alt\"}],\" \",\"August 2, 2025\"]}],[\"$\",\"$L13\",null,{\"content\":\"$14\"}]]}],\"$L15\",\"$L16\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"17:I[5183,[\"778\",\"static/chunks/778-f9403c0e33e1c074.js\",\"63\",\"static/chunks/63-b8ba2254fb9ac97a.js\",\"231\",\"static/chunks/231-25f0858d523e67a4.js\",\"744\",\"static/chunks/app/blogs/%5Bslug%5D/page-dc1945ed8fd780cb.js\"],\"default\"]\n15:[\"$\",\"$L17\",null,{\"socialConfig\":{\"siteurl\":\"https://michaellunzer.com\",\"twitterHandle\":\"@michaellunzer\",\"config\":{\"url\":\"https://michaellunzer.com/blogs/connecting-a-grandstream-ht80x-ht801-or-ht802-to-twilio-sip\",\"title\":\"Connecting a Grandstream HT80X (HT801 or HT802) to Twilio SIP\"}}}]\n16:[\"$\",\"div\",null,{\"className\":\"comments-section\",\"children\":[[\"$\",\"h3\",null,{\"children\":\"Comments\"}],[\"$\",\"p\",null,{\"children\":\"Comments are currently disabled. Feel free to reach out on social media!\"}]]}]\n"])</script></body></html>