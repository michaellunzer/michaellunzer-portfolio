<!DOCTYPE html><!--IoBMdfHoLDtHEYMLnK0Ai--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="https://images.ctfassets.net/o4gibwve10tr/7yHuAa09NVOcZ25POk7cbM/9b2cb1a82fcec0461a26b030df8ed159/ML-logo-white.png"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/6WKiLnYFqdRaTg3ywC6SoY/633ac60bc2a7cccc12ea359dbbf67738/IMG_5014.jpeg"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/JNDxnREUKujPCEvzEDrmr/f84547f3cf2e82d59d030c6dae096c02/IMG_5015.jpeg"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/2p0gk5N6oPFSuikdWlnzjC/b824dcaa110a985228129c96857f50d9/IMG_5016.jpeg"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/iJ5XsUL7rZXkbAhv31CIz/f04d06ee628a71d622917ffb9bd7a38e/IMG_5017.jpeg"/><link rel="preload" as="image" href="//images.ctfassets.net/o4gibwve10tr/6OFTIuzz73YiM6liy0oDD0/c3f859b90878b10a1e6e0cb8455926e0/IMG_5020.jpeg"/><link rel="stylesheet" href="/_next/static/css/931b179cff3131dc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/f56e075401be6041.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/bf413bc97a2d8c3a.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/b9c247a1f9d5af8a.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/f055e431c58b907b.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-59b2e0708c30977e.js"/><script src="/_next/static/chunks/4bd1b696-cf72ae8a39fa05aa.js" async=""></script><script src="/_next/static/chunks/964-9b249bc0ac5a9a8b.js" async=""></script><script src="/_next/static/chunks/main-app-f320de467931c2a1.js" async=""></script><script src="/_next/static/chunks/778-f9403c0e33e1c074.js" async=""></script><script src="/_next/static/chunks/63-b8ba2254fb9ac97a.js" async=""></script><script src="/_next/static/chunks/231-25f0858d523e67a4.js" async=""></script><script src="/_next/static/chunks/app/projects/%5Bslug%5D/page-b84bae1ee5664536.js" async=""></script><script src="/_next/static/chunks/app/projects/page-e2e8a22ab075e965.js" async=""></script><meta name="next-size-adjust" content=""/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><title>Michael Lunzer</title><meta name="description" content="Personal Site"/><meta name="author" content="@michaellunzer"/><meta name="robots" content="index, follow"/><meta property="og:title" content="Michael Lunzer"/><meta property="og:description" content="Personal Site"/><meta property="og:url" content="https://www.michaellunzer.com/"/><meta property="og:site_name" content="Michael Lunzer"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Michael Lunzer"/><meta name="twitter:description" content="Personal Site"/><link rel="stylesheet" href="/style.css"/><link rel="stylesheet" href="/font-awesome.css"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_e8ce0c"><div hidden=""><!--$--><!--/$--></div><header class="site-header "><div class="container"><div class="header-main"><div class="logo"><a href="/"><img src="https://images.ctfassets.net/o4gibwve10tr/7yHuAa09NVOcZ25POk7cbM/9b2cb1a82fcec0461a26b030df8ed159/ML-logo-white.png" alt="logo"/></a></div><div class="responsive-menu"><span></span></div><div class="menu"><ul><li><a href="/#home">Home</a></li><li><a href="/#About">About</a></li><li><a href="/#Blogs">Blog</a></li><li><a href="/#Projects">Projects</a></li><li><a href="/#BucketList">Bucket List</a></li><li><a href="/#Contact">Contact</a></li><li><a href="/#Map">Map</a></li><li><a href="/resume/">Resume</a></li><li><a href="/spotify/">Spotify</a></li></ul></div></div></div></header><div><main id="home"><div class="site-container project-post"><div class="container"><div class="feature-img"><img alt="ESPHome Stepper Motor Heater Controller" loading="lazy" width="1500" height="800" decoding="async" data-nimg="1" class="img-fluid" style="color:transparent;object-fit:cover;object-position:50% 50%" src="https://images.ctfassets.net/o4gibwve10tr/JNDxnREUKujPCEvzEDrmr/f84547f3cf2e82d59d030c6dae096c02/IMG_5015.jpeg"/></div><div class="details"><h1 class="title">ESPHome Stepper Motor Heater Controller</h1><span class="date"><i class="fas fa-calendar-alt"></i> <!-- -->February 7, 2021</span><div class="markdown-content"><p>One of the challenges of building a smart home when you don&#x27;t own a <em>home</em> is creating projects that work with the existing features of the home so it&#x27;ll be easier when you eventually move out.</p>
<p>This is another project that I had dreamed up around 2013 from my first apartment. I had written a python script to control this stepper motor connected to a Raspberry Pi. Additionally, I learned how to use AutoDesk Fusion 360 and created a 3D model to hold the livestrong rubber band. I had printed at a hackerspace for about $20, which seemed a bit much for what it is, but that was in the &quot;early&quot; and exciting days of 3D printing lol.</p>
<p>I&#x27;ve since moved a few times and enhanced the setup. I&#x27;ve taken the stepper motor and connected it to an ESP8266 and used Home-Assistant to automate a baseboard heater.</p>
<p>I&#x27;ve used some screws (that are easily removable) to mount the stepper motor to the baseboard. I used a &quot;livestrong&quot; rubber band bracelet as a belt to control the heater knob by tension and friction.</p>
<p>The code within ESPHome is pretty straightforward. It uses the stepper motor and the temperature sensor to make a &quot;<a href="https://esphome.io/components/climate/bang_bang.html?highlight=bang%20bang" target="_blank" rel="noopener noreferrer" class="markdown-link">bang-bang climate controller</a>&quot;. If you&#x27;re wondering where the name &quot;Bang-Bang&quot; controller came from, check <a href="https://en.wikipedia.org/wiki/Bang%E2%80%93bang_control" target="_blank" rel="noopener noreferrer" class="markdown-link">wikipedia</a>. Basically, it switches between two states (on/off or up/down) to keep something between a desired state.</p>
<p>In this example, you set the desired temperature and the stepper motor will turn the heater on or off to maintain the heat at that desired temperature.</p>
<p>Here are a couple pictures of what it looks like:</p>
<p><img src="//images.ctfassets.net/o4gibwve10tr/6WKiLnYFqdRaTg3ywC6SoY/633ac60bc2a7cccc12ea359dbbf67738/IMG_5014.jpeg" alt="ESPHome Stepper Motor Heater Controller 1"/></p>
<p><img src="//images.ctfassets.net/o4gibwve10tr/JNDxnREUKujPCEvzEDrmr/f84547f3cf2e82d59d030c6dae096c02/IMG_5015.jpeg" alt="Cover - ESPHome Stepper Motor Heater Controller"/></p>
<p><img src="//images.ctfassets.net/o4gibwve10tr/2p0gk5N6oPFSuikdWlnzjC/b824dcaa110a985228129c96857f50d9/IMG_5016.jpeg" alt="ESPHome Stepper Motor Heater Controller 2 Top"/></p>
<p><img src="//images.ctfassets.net/o4gibwve10tr/iJ5XsUL7rZXkbAhv31CIz/f04d06ee628a71d622917ffb9bd7a38e/IMG_5017.jpeg" alt="ESPHome Stepper Motor Heater Controller 3 Right Side"/></p>
<p><img src="//images.ctfassets.net/o4gibwve10tr/6OFTIuzz73YiM6liy0oDD0/c3f859b90878b10a1e6e0cb8455926e0/IMG_5020.jpeg" alt="ESPHome Stepper Motor Heater Controller 4 Front"/></p>
<h1 class="markdown-h1">ESPHome Code:</h1>
<pre><pre class="code-block"><code class="hljs language-yaml">
<span class="hljs-attr">esphome:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">heater</span>
  <span class="hljs-attr">platform:</span> <span class="hljs-string">ESP8266</span>
  <span class="hljs-attr">board:</span> <span class="hljs-string">nodemcuv2</span>

<span class="hljs-attr">wifi:</span>
  <span class="hljs-attr">ssid:</span> <span class="hljs-string">&#x27;Network_SSID&#x27;</span>
  <span class="hljs-attr">password:</span> <span class="hljs-string">&#x27;Network_PW&#x27;</span>

<span class="hljs-comment"># Enable logging</span>
<span class="hljs-attr">logger:</span>

<span class="hljs-attr">ota:</span>

<span class="hljs-attr">api:</span>
  <span class="hljs-attr">services:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">service:</span> <span class="hljs-string">control_stepper</span>
      <span class="hljs-attr">variables:</span>
        <span class="hljs-attr">target:</span> <span class="hljs-string">int</span>
      <span class="hljs-attr">then:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">stepper.set_target:</span>
            <span class="hljs-attr">id:</span> <span class="hljs-string">my_stepper</span>
            <span class="hljs-attr">target:</span> <span class="hljs-type">!lambda</span> <span class="hljs-string">&#x27;return target;&#x27;</span>

<span class="hljs-attr">stepper:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">platform:</span> <span class="hljs-string">uln2003</span>
    <span class="hljs-attr">id:</span> <span class="hljs-string">my_stepper</span>
    <span class="hljs-attr">pin_a:</span> <span class="hljs-string">D1</span>
    <span class="hljs-attr">pin_b:</span> <span class="hljs-string">D2</span>
    <span class="hljs-attr">pin_c:</span> <span class="hljs-string">D3</span>
    <span class="hljs-attr">pin_d:</span> <span class="hljs-string">D4</span>
    <span class="hljs-attr">max_speed:</span> <span class="hljs-number">150</span> <span class="hljs-string">steps/s</span>
    <span class="hljs-attr">step_mode:</span> <span class="hljs-string">HALF_STEP</span> <span class="hljs-comment">#WAVE_DRIVE # </span>

<span class="hljs-attr">sensor:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">platform:</span> <span class="hljs-string">dht</span>
    <span class="hljs-attr">pin:</span> <span class="hljs-string">D5</span>
    <span class="hljs-attr">temperature:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;Heater Temperature&quot;</span>
      <span class="hljs-attr">id:</span> <span class="hljs-string">heater_temperature</span>
    <span class="hljs-attr">humidity:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;Heater Humidity&quot;</span>
      <span class="hljs-attr">id:</span> <span class="hljs-string">heater_humidity</span>
    <span class="hljs-attr">model:</span> <span class="hljs-string">AM2302</span>

<span class="hljs-attr">climate:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">platform:</span> <span class="hljs-string">bang_bang</span>
    <span class="hljs-attr">id:</span> <span class="hljs-string">heater_climate</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">climate</span>
    <span class="hljs-attr">sensor:</span> <span class="hljs-string">heater_temperature</span>
    <span class="hljs-attr">default_target_temperature_low:</span> <span class="hljs-number">20</span> <span class="hljs-string">°C</span>
    <span class="hljs-attr">default_target_temperature_high:</span> <span class="hljs-number">22</span> <span class="hljs-string">°C</span>

    <span class="hljs-attr">heat_action:</span>
      <span class="hljs-comment"># - switch.turn_on: heater</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">stepper.set_target:</span>
          <span class="hljs-attr">id:</span> <span class="hljs-string">my_stepper</span>
          <span class="hljs-attr">target:</span> <span class="hljs-number">-5000</span>
    <span class="hljs-attr">cool_action:</span>
      <span class="hljs-comment"># - switch.turn_off: heater</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">stepper.set_target:</span>
          <span class="hljs-attr">id:</span> <span class="hljs-string">my_stepper</span>
          <span class="hljs-attr">target:</span> <span class="hljs-number">5000</span>
    <span class="hljs-attr">idle_action:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">stepper.set_target:</span>
          <span class="hljs-attr">id:</span> <span class="hljs-string">my_stepper</span>
          <span class="hljs-attr">target:</span> <span class="hljs-number">2500</span>

</code></pre></pre>
<h1 class="markdown-h1">Home Assistant Configuation</h1>
<pre><pre class="code-block"><code class="hljs language-yaml"><span class="hljs-comment"># Home Assistant Configuration</span>
<span class="hljs-attr">input_number:</span>
  <span class="hljs-attr">stepper_control:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">Stepper</span> <span class="hljs-string">Control</span>
    <span class="hljs-attr">initial:</span> <span class="hljs-number">0</span>
    <span class="hljs-attr">min:</span> <span class="hljs-number">-3000</span>
    <span class="hljs-attr">max:</span> <span class="hljs-number">3000</span>
    <span class="hljs-attr">step:</span> <span class="hljs-number">1</span>
    <span class="hljs-comment"># mode: box</span>

</code></pre></pre>
<h1 class="markdown-h1">Home Assistant Automation</h1>
<pre><pre class="code-block"><code class="hljs language-yaml">
<span class="hljs-comment"># Home Assistant Automation</span>
<span class="hljs-attr">automation:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">alias:</span> <span class="hljs-string">Write</span> <span class="hljs-string">Stepper</span> <span class="hljs-string">Value</span> <span class="hljs-string">to</span> <span class="hljs-string">ESP</span>
    <span class="hljs-attr">trigger:</span>
      <span class="hljs-attr">platform:</span> <span class="hljs-string">state</span>
      <span class="hljs-attr">entity_id:</span> <span class="hljs-string">input_number.stepper_control</span>
    <span class="hljs-attr">action:</span>
      <span class="hljs-comment"># Replace livingroom with the name you gave the ESP</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">service:</span> <span class="hljs-string">esphome.heater_control_stepper</span>
        <span class="hljs-attr">data_template:</span>
          <span class="hljs-attr">target:</span> <span class="hljs-string">&#x27;{{ trigger.to_state.state | int }}&#x27;</span>

</code></pre></pre>
<p>I&#x27;ve combined both sections of the Home Assistant side into a file called <code class="inline-code">Heater.yaml</code> that sits inside the Packages folder. Be sure to include   <code class="inline-code">packages: !include_dir_named packages</code> underneath the <code class="inline-code">homeassistant:</code> section at the beginning of your YAML config.</p>
<p>I&#x27;ve moved again, and this setup is no longer in use because my new place has central heating. Let me know if you have a good use-case for this stepper motor!</p></div></div><div class="post-social"><h6 class="title is-6">Share:</h6><button class="button is-outlined is-rounded facebook"><span class="icon"><i class="fab fa-facebook-f"></i></span><span class="text">Facebook</span></button><button class="button is-outlined is-rounded twitter"><span class="icon"><i class="fab fa-twitter"></i></span><span class="text">Twitter</span></button></div></div></div></main></div><div class="site-footer" id="footer"><div class="container"><span>Copyright © <!-- -->Michael Lunzer<!-- --> <!-- -->2025</span></div></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-59b2e0708c30977e.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7555,[],\"\"]\n3:I[1295,[],\"\"]\n6:I[9665,[],\"OutletBoundary\"]\n8:I[4911,[],\"AsyncMetadataOutlet\"]\na:I[9665,[],\"ViewportBoundary\"]\nc:I[9665,[],\"MetadataBoundary\"]\nd:\"$Sreact.suspense\"\nf:I[8393,[],\"\"]\n:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/931b179cff3131dc.css\",\"style\"]\n:HL[\"/_next/static/css/f56e075401be6041.css\",\"style\"]\n:HL[\"/_next/static/css/bf413bc97a2d8c3a.css\",\"style\"]\n:HL[\"/_next/static/css/b9c247a1f9d5af8a.css\",\"style\"]\n:HL[\"/_next/static/css/f055e431c58b907b.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"IoBMdfHoLDtHEYMLnK0Ai\",\"p\":\"\",\"c\":[\"\",\"projects\",\"esphome-stepper-motor-heater-controller\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"projects\",{\"children\":[[\"slug\",\"esphome-stepper-motor-heater-controller\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/931b179cff3131dc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f56e075401be6041.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/x-icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"180x180\",\"href\":\"/apple-touch-icon-180x180.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"152x152\",\"href\":\"/apple-touch-icon-152x152.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"144x144\",\"href\":\"/apple-touch-icon-144x144.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"120x120\",\"href\":\"/apple-touch-icon-120x120.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"114x114\",\"href\":\"/apple-touch-icon-114x114.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"76x76\",\"href\":\"/apple-touch-icon-76x76.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"72x72\",\"href\":\"/apple-touch-icon-72x72.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"57x57\",\"href\":\"/apple-touch-icon-57x57.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"/style.css\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"/font-awesome.css\"}]]}],[\"$\",\"body\",null,{\"className\":\"__className_e8ce0c\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$L4\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/bf413bc97a2d8c3a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b9c247a1f9d5af8a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[\"projects\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"esphome-stepper-motor-heater-controller\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/bf413bc97a2d8c3a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b9c247a1f9d5af8a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f055e431c58b907b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L6\",null,{\"children\":[\"$L7\",[\"$\",\"$L8\",null,{\"promise\":\"$@9\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$d\",null,{\"fallback\":null,\"children\":\"$Le\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$f\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n7:null\n"])</script><script>self.__next_f.push([1,"9:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Michael Lunzer\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Personal Site\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"@michaellunzer\"}],[\"$\",\"meta\",\"3\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"Michael Lunzer\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"Personal Site\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:url\",\"content\":\"https://www.michaellunzer.com/\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:site_name\",\"content\":\"Michael Lunzer\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:title\",\"content\":\"Michael Lunzer\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:description\",\"content\":\"Personal Site\"}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"e:\"$9:metadata\"\n"])</script><script>self.__next_f.push([1,"10:I[658,[\"778\",\"static/chunks/778-f9403c0e33e1c074.js\",\"63\",\"static/chunks/63-b8ba2254fb9ac97a.js\",\"231\",\"static/chunks/231-25f0858d523e67a4.js\",\"419\",\"static/chunks/app/projects/%5Bslug%5D/page-b84bae1ee5664536.js\"],\"default\"]\n11:I[3063,[\"778\",\"static/chunks/778-f9403c0e33e1c074.js\",\"63\",\"static/chunks/63-b8ba2254fb9ac97a.js\",\"231\",\"static/chunks/231-25f0858d523e67a4.js\",\"419\",\"static/chunks/app/projects/%5Bslug%5D/page-b84bae1ee5664536.js\"],\"Image\"]\n12:I[2370,[\"778\",\"static/chunks/778-f9403c0e33e1c074.js\",\"63\",\"static/chunks/63-b8ba2254fb9ac97a.js\",\"231\",\"static/chunks/231-25f0858d523e67a4.js\",\"419\",\"static/chunks/app/projects/%5Bslug%5D/page-b84bae1ee5664536.js\"],\"default\"]\n15:I[6874,[\"778\",\"static/chunks/778-f9403c0e33e1c074.js\",\"63\",\"static/chunks/63-b8ba2254fb9ac97a.js\",\"893\",\"static/chunks/app/projects/page-e2e8a22ab075e965.js\"],\"\"]\n13:T12ce,"])</script><script>self.__next_f.push([1,"One of the challenges of building a smart home when you don't own a *home* is creating projects that work with the existing features of the home so it'll be easier when you eventually move out. \n\nThis is another project that I had dreamed up around 2013 from my first apartment. I had written a python script to control this stepper motor connected to a Raspberry Pi. Additionally, I learned how to use AutoDesk Fusion 360 and created a 3D model to hold the livestrong rubber band. I had printed at a hackerspace for about $20, which seemed a bit much for what it is, but that was in the \"early\" and exciting days of 3D printing lol. \n\nI've since moved a few times and enhanced the setup. I've taken the stepper motor and connected it to an ESP8266 and used Home-Assistant to automate a baseboard heater. \n\nI've used some screws (that are easily removable) to mount the stepper motor to the baseboard. I used a \"livestrong\" rubber band bracelet as a belt to control the heater knob by tension and friction.\n\nThe code within ESPHome is pretty straightforward. It uses the stepper motor and the temperature sensor to make a \"[bang-bang climate controller](https://esphome.io/components/climate/bang_bang.html?highlight=bang%20bang)\". If you're wondering where the name \"Bang-Bang\" controller came from, check [wikipedia](https://en.wikipedia.org/wiki/Bang%E2%80%93bang_control). Basically, it switches between two states (on/off or up/down) to keep something between a desired state. \n\nIn this example, you set the desired temperature and the stepper motor will turn the heater on or off to maintain the heat at that desired temperature.\n\nHere are a couple pictures of what it looks like:\n\n![ESPHome Stepper Motor Heater Controller 1](//images.ctfassets.net/o4gibwve10tr/6WKiLnYFqdRaTg3ywC6SoY/633ac60bc2a7cccc12ea359dbbf67738/IMG_5014.jpeg)\n\n![Cover - ESPHome Stepper Motor Heater Controller](//images.ctfassets.net/o4gibwve10tr/JNDxnREUKujPCEvzEDrmr/f84547f3cf2e82d59d030c6dae096c02/IMG_5015.jpeg)\n\n![ESPHome Stepper Motor Heater Controller 2 Top](//images.ctfassets.net/o4gibwve10tr/2p0gk5N6oPFSuikdWlnzjC/b824dcaa110a985228129c96857f50d9/IMG_5016.jpeg)\n\n![ESPHome Stepper Motor Heater Controller 3 Right Side](//images.ctfassets.net/o4gibwve10tr/iJ5XsUL7rZXkbAhv31CIz/f04d06ee628a71d622917ffb9bd7a38e/IMG_5017.jpeg)\n\n![ESPHome Stepper Motor Heater Controller 4 Front](//images.ctfassets.net/o4gibwve10tr/6OFTIuzz73YiM6liy0oDD0/c3f859b90878b10a1e6e0cb8455926e0/IMG_5020.jpeg)\n\n# ESPHome Code:\n\n```yaml\n\nesphome:\n  name: heater\n  platform: ESP8266\n  board: nodemcuv2\n\nwifi:\n  ssid: 'Network_SSID'\n  password: 'Network_PW'\n\n# Enable logging\nlogger:\n\nota:\n\napi:\n  services:\n    - service: control_stepper\n      variables:\n        target: int\n      then:\n        - stepper.set_target:\n            id: my_stepper\n            target: !lambda 'return target;'\n\nstepper:\n  - platform: uln2003\n    id: my_stepper\n    pin_a: D1\n    pin_b: D2\n    pin_c: D3\n    pin_d: D4\n    max_speed: 150 steps/s\n    step_mode: HALF_STEP #WAVE_DRIVE # \n\nsensor:\n  - platform: dht\n    pin: D5\n    temperature:\n      name: \"Heater Temperature\"\n      id: heater_temperature\n    humidity:\n      name: \"Heater Humidity\"\n      id: heater_humidity\n    model: AM2302\n\nclimate:\n  - platform: bang_bang\n    id: heater_climate\n    name: climate\n    sensor: heater_temperature\n    default_target_temperature_low: 20 °C\n    default_target_temperature_high: 22 °C\n\n    heat_action:\n      # - switch.turn_on: heater\n      - stepper.set_target:\n          id: my_stepper\n          target: -5000\n    cool_action:\n      # - switch.turn_off: heater\n      - stepper.set_target:\n          id: my_stepper\n          target: 5000\n    idle_action:\n      - stepper.set_target:\n          id: my_stepper\n          target: 2500\n\n```\n\n# Home Assistant Configuation\n\n```yaml \n# Home Assistant Configuration\ninput_number:\n  stepper_control:\n    name: Stepper Control\n    initial: 0\n    min: -3000\n    max: 3000\n    step: 1\n    # mode: box\n\n```\n\n# Home Assistant Automation\n\n```yaml\n\n# Home Assistant Automation\nautomation:\n  - alias: Write Stepper Value to ESP\n    trigger:\n      platform: state\n      entity_id: input_number.stepper_control\n    action:\n      # Replace livingroom with the name you gave the ESP\n      - service: esphome.heater_control_stepper\n        data_template:\n          target: '{{ trigger.to_state.state | int }}'\n\n```\n\nI've combined both sections of the Home Assistant side into a file called `Heater.yaml` that sits inside the Packages folder. Be sure to include   `packages: !include_dir_named packages` underneath the `homeassistant:` section at the beginning of your YAML config. \n\nI've moved again, and this setup is no longer in use because my new place has central heating. Let me know if you have a good use-case for this stepper motor!\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"$L10\",null,{\"siteInfo\":{\"metadata\":{\"tags\":[],\"concepts\":[]},\"sys\":{\"space\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"Space\",\"id\":\"o4gibwve10tr\"}},\"id\":\"1vaZauN3G1LbRsJutH3AU9\",\"type\":\"Entry\",\"createdAt\":\"2020-05-28T21:29:56.813Z\",\"updatedAt\":\"2022-04-19T07:19:17.934Z\",\"environment\":{\"sys\":{\"id\":\"master\",\"type\":\"Link\",\"linkType\":\"Environment\"}},\"publishedVersion\":45,\"revision\":18,\"contentType\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"ContentType\",\"id\":\"siteInformation\"}},\"locale\":\"en-US\"},\"fields\":{\"siteName\":\"Michael Lunzer\",\"siteUrl\":\"https://michaellunzer.com\",\"logo\":{\"metadata\":{\"tags\":[],\"concepts\":[]},\"sys\":{\"space\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"Space\",\"id\":\"o4gibwve10tr\"}},\"id\":\"7yHuAa09NVOcZ25POk7cbM\",\"type\":\"Asset\",\"createdAt\":\"2020-05-28T21:29:46.445Z\",\"updatedAt\":\"2020-07-03T23:34:40.696Z\",\"environment\":{\"sys\":{\"id\":\"master\",\"type\":\"Link\",\"linkType\":\"Environment\"}},\"publishedVersion\":35,\"revision\":10,\"locale\":\"en-US\"},\"fields\":{\"title\":\"ML-logo-white\",\"file\":{\"url\":\"//images.ctfassets.net/o4gibwve10tr/7yHuAa09NVOcZ25POk7cbM/9b2cb1a82fcec0461a26b030df8ed159/ML-logo-white.png\",\"details\":{\"size\":31304,\"image\":{\"width\":319,\"height\":302}},\"fileName\":\"ML-logo-white.png\",\"contentType\":\"image/png\"}}},\"twiteerHandle\":\"@michaellunzer\",\"siteDescription\":\"Personal Site\",\"menus\":[\"Blogs\",\"Photos\",\"About\",\"Contact\",\"Work\",\"Map\",\"Resume\",\"Projects\",\"Bucket List\",\"Spotify\"]}},\"children\":[null,[\"$\",\"div\",null,{\"className\":\"site-container project-post\",\"children\":[\"$\",\"div\",null,{\"className\":\"container\",\"children\":[[\"$\",\"div\",null,{\"className\":\"feature-img\",\"children\":[\"$\",\"$L11\",null,{\"src\":\"https://images.ctfassets.net/o4gibwve10tr/JNDxnREUKujPCEvzEDrmr/f84547f3cf2e82d59d030c6dae096c02/IMG_5015.jpeg\",\"alt\":\"ESPHome Stepper Motor Heater Controller\",\"width\":1500,\"height\":800,\"className\":\"img-fluid\",\"style\":{\"objectFit\":\"cover\",\"objectPosition\":\"50% 50%\"}}]}],[\"$\",\"div\",null,{\"className\":\"details\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"title\",\"children\":\"ESPHome Stepper Motor Heater Controller\"}],[\"$\",\"span\",null,{\"className\":\"date\",\"children\":[[\"$\",\"i\",null,{\"className\":\"fas fa-calendar-alt\"}],\" \",\"February 7, 2021\"]}],[\"$\",\"$L12\",null,{\"content\":\"$13\"}]]}],\"$L14\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"$L10\",null,{\"siteInfo\":{\"metadata\":{\"tags\":[],\"concepts\":[]},\"sys\":{\"space\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"Space\",\"id\":\"o4gibwve10tr\"}},\"id\":\"1vaZauN3G1LbRsJutH3AU9\",\"type\":\"Entry\",\"createdAt\":\"2020-05-28T21:29:56.813Z\",\"updatedAt\":\"2022-04-19T07:19:17.934Z\",\"environment\":{\"sys\":{\"id\":\"master\",\"type\":\"Link\",\"linkType\":\"Environment\"}},\"publishedVersion\":45,\"revision\":18,\"contentType\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"ContentType\",\"id\":\"siteInformation\"}},\"locale\":\"en-US\"},\"fields\":{\"siteName\":\"Michael Lunzer\",\"siteUrl\":\"https://michaellunzer.com\",\"logo\":{\"metadata\":{\"tags\":[],\"concepts\":[]},\"sys\":{\"space\":{\"sys\":{\"type\":\"Link\",\"linkType\":\"Space\",\"id\":\"o4gibwve10tr\"}},\"id\":\"7yHuAa09NVOcZ25POk7cbM\",\"type\":\"Asset\",\"createdAt\":\"2020-05-28T21:29:46.445Z\",\"updatedAt\":\"2020-07-03T23:34:40.696Z\",\"environment\":{\"sys\":{\"id\":\"master\",\"type\":\"Link\",\"linkType\":\"Environment\"}},\"publishedVersion\":35,\"revision\":10,\"locale\":\"en-US\"},\"fields\":{\"title\":\"ML-logo-white\",\"file\":{\"url\":\"//images.ctfassets.net/o4gibwve10tr/7yHuAa09NVOcZ25POk7cbM/9b2cb1a82fcec0461a26b030df8ed159/ML-logo-white.png\",\"details\":{\"size\":31304,\"image\":{\"width\":319,\"height\":302}},\"fileName\":\"ML-logo-white.png\",\"contentType\":\"image/png\"}}},\"twiteerHandle\":\"@michaellunzer\",\"siteDescription\":\"Personal Site\",\"menus\":[\"Blogs\",\"Photos\",\"About\",\"Contact\",\"Work\",\"Map\",\"Resume\",\"Projects\",\"Bucket List\",\"Spotify\"]}},\"children\":[null,[\"$\",\"div\",null,{\"className\":\"site-container\",\"children\":[\"$\",\"div\",null,{\"className\":\"container\",\"children\":[\"$\",\"div\",null,{\"className\":\"row\",\"children\":[\"$\",\"div\",null,{\"className\":\"col-sm-12 text-center\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"404 - Page Not Found\"}],[\"$\",\"p\",null,{\"children\":\"The page you're looking for doesn't exist.\"}],[\"$\",\"$L15\",null,{\"href\":\"/\",\"className\":\"btn btn-primary\",\"children\":\"Go back home\"}]]}]}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"16:I[5183,[\"778\",\"static/chunks/778-f9403c0e33e1c074.js\",\"63\",\"static/chunks/63-b8ba2254fb9ac97a.js\",\"231\",\"static/chunks/231-25f0858d523e67a4.js\",\"419\",\"static/chunks/app/projects/%5Bslug%5D/page-b84bae1ee5664536.js\"],\"default\"]\n14:[\"$\",\"$L16\",null,{\"socialConfig\":{\"siteurl\":\"https://michaellunzer.com\",\"twitterHandle\":\"@michaellunzer\",\"config\":{\"url\":\"https://michaellunzer.com/projects/esphome-stepper-motor-heater-controller\",\"title\":\"ESPHome Stepper Motor Heater Controller\"}}}]\n"])</script></body></html>